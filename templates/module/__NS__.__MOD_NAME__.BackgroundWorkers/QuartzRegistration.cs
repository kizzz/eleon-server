using Microsoft.Extensions.DependencyInjection; using Quartz; namespace __NS__.__MOD_NAME__.BackgroundWorkers { public static class QuartzRegistration { public static IServiceCollection Add__MOD_NAME__Quartz(this IServiceCollection services) { services.AddQuartz(q=>{ var key=new JobKey("__MOD_NAME___ExampleJob"); q.AddJob<Jobs.ExampleJob>(o=>o.WithIdentity(key)); q.AddTrigger(o=>o.ForJob(key).WithIdentity("__MOD_NAME___ExampleJob.trigger").WithSimpleSchedule(x=>x.WithIntervalInSeconds(30).RepeatForever()));}); services.AddQuartzHostedService(o=>o.WaitForJobsToComplete=true); return services; } } }
